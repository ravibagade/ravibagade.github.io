<!DOCTYPE html>
<html>
<head>
  <title>Live Vehicle Tracker</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>
</head>
<body>
  <h2>Vehicle Live Location</h2>
  <input type="text" id="vehicleNumber" placeholder="Enter Vehicle Number" required><br><br>
  <button onclick="startTracking()">Start Tracking</button>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyD8KbNKg69YNB2MQP63YTPQQghsNO8_RRI",
      authDomain: "location-tracker-78a61.firebaseapp.com",
      projectId: "location-tracker-78a61",
      storageBucket: "location-tracker-78a61.appspot.com",
      messagingSenderId: "349242032443",
      appId: "1:349242032443:web:083a3597208aa1e338771e"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let trackingInterval;

    function startTracking() {
      const vehicleNumber = document.getElementById('vehicleNumber').value.trim();
      if (!vehicleNumber) return alert("Enter vehicle number.");

      if ("geolocation" in navigator) {
        trackingInterval = setInterval(() => {
          navigator.geolocation.getCurrentPosition((position) => {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const timestamp = new Date().toISOString();

            db.ref('vehicles/' + vehicleNumber).set({
              latitude: latitude,
              longitude: longitude,
              timestamp: timestamp
            });
          }, (error) => {
            console.error("Error getting location", error);
          });
        }, 5000); // Update every 5 seconds
      } else {
        alert("Geolocation not supported.");
      }
    }
  </script>
</body>
</html>
